<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <title>Add vehicle</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
        integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="css/Popup.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <link rel="stylesheet" type="text/css" href="css/dashboard.css" />
    <link rel="stylesheet" type="text/css" href="css/services.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="services.js"></script>
</head>

<body>
    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <span>
                    <img src="images/truck.png" alt="" height="35" />
                </span>
                <strong>SM</strong>
            </div>
            <ul class="list-unstyled components mt-4 mx-2">
                <li class="active mt-1">
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">
                        <i class="fa fa-th-large" aria-hidden="true"></i>
                        Fleet Assets
                    </a>
                    <ul class="collapse list-unstyled" id="homeSubmenu">
                        <li>
                            <a href="index.html">
                                <i class="fa fa-truck" aria-hidden="true"></i>
                                vehicles
                            </a>
                        </li>
                        <li>
                            <a href="drivers.html">
                                <i class="fa fa-id-card" aria-hidden="true"></i>
                                Drivers
                            </a>
                        </li>
                        <li>
                            <a href="inventory.html">
                                <i class="fa fa-cogs" aria-hidden="true"></i>
                                Inventory
                            </a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="dashboard.html">
                        <i class="fa fa-calendar mt-3" aria-hidden="true"></i>
                        Dasboard
                    </a>
                    <a href="trip.html">
                        <i class="fa fa-calendar mt-3" aria-hidden="true"></i>
                        Trips
                    </a>
                    <a href="services.html">
                        <i class="fa fa-calendar mt-3" aria-hidden="true"></i>
                        Services
                    </a>
                    <a href="help.html">
                        <i class="fa fa-question mt-3" aria-hidden="true"></i>
                        Help
                    </a>
                    <!-- <a href="#">
                        <i class="fa fa-sign-out mt-3" aria-hidden="true"></i>
                        Log out
                    </a> -->
                </li>
            </ul>
        </nav>
        <!-- Page Content  -->
        <div id="content">
            <nav class="navbar navbar-expand-lg navbar-light">
                <div class="dashHeader">
                    <span>
                        <button type="button" id="sidebarCollapse" class="btn btn_toggle">
                            <i class="fa fa-bars" aria-hidden="true"></i>
                        </button>
                    </span>
                </div>
                <!-- <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item active">
                            <a class="nav-link" href="#">Page</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Page</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Page</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Page</a>
                        </li>
                    </ul>
                </div> -->
            </nav>
            <div class="modal fade bd-example-modal" id="trip_edit" tabindex="-1" role="dialog"
                aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLongTitle">
                                Edit trip
                            </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body trip_edit_body">
                            <form>
                                <div class="form-group row ">
                                    <label class="col-md-4" for="service_edit_invoice">Enter Invoice ID</label>
                                    <input type="text" class="form-control col-md-8" id="service_edit_invoice" />
                                </div>
                                <div class="form-group row">
                                    <label class="col-md-4" for="service_edit_vehicle">Select vehicle
                                    </label>
                                    <select type="text" class="form-control col-md-8"
                                        id="service_edit_vehicle"></select>
                                </div>
                                <div class="form-group row">
                                    <label class="col-md-4" for="service_edit_date">Servicing date
                                    </label>
                                    <input type="date" class="form-control col-md-8" id="service_edit_date" />
                                </div>
                            </form>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">
                                Close
                            </button>
                            <button type="button" onclick="send_edit_data()" class="btn btn-primary">Submit</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="service">
                    <div class="service_header">
                        <h3>Services</h3>
                        <div class="header_button d-flex">
                            <a class="filter_button mr-4" type="button" data-toggle="collapse"
                                data-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                                <i class="fa fa-sliders" aria-hidden="true"></i>
                            </a>
                            <a class="button_add" href="add_service_form.html"><i class="fa fa-plus"
                                    aria-hidden="true"></i>
                                Service</a>
                        </div>
                    </div>
                    <hr style="background-color: #424242" />
                    <div class="collapse" id="collapseExample">
                        <div class="search d-flex mb-4">
                            <select id="search_tripDep" class="form-control">
                                <option disabled selected value>Select invoice ID...</option>
                            </select>
                            <select id="search_tripVehicleNo" class="form-control">
                                <option disabled selected value>Select vehicle number...</option>
                            </select>
                            <input type="date" id="search_tripDate" class="form-control" />
                            <button onclick="search_tripDetails()" type="button" class="button_top"><i
                                    class="fa fa-search" aria-hidden="true"></i></button>
                            <button type="button" class="button_top"><i class="fa fa-refresh"
                                    aria-hidden="true"></i></button>
                        </div>
                    </div>
                    <div id="service_data">
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        var temp;
        var vehicle_id;
        $(document).ready(function () {
            var service = fetch_data("service");
            console.log(service.message);
            if (service.error == false) {
                for (var i = 0; i < service.message.data.length; i++) {
                    vehicle_id = service.message.data[i].vehicle_id.id;
                    // console.log(vehicle_id);
                    temp = service.message.data[i];
                    console.log(temp);
                    var service_date = temp.date ? temp.date.split("-") : ["", "", ""];
                    var service_date_month = service_date[1];
                    var service_date_day = service_date[2];
                    var service_date_year = service_date[0];
                    var service_year = service_date_year.slice(2);
                    var service_date_list = [];
                    var service_date_string = service_date_month.toString();
                    for (var j = 0, len = service_date_string.length; j < len; j += 1) {
                        service_date_list.push(+service_date_string.charAt(j));
                    }
                    if (service_date_list[0] == "0") {
                        service_date_month = service_date_list[1];
                    } else {
                        service_date_month = service_date[1];
                    }
                    var service_month = ["Jan", "Feb", "Mar", "Apr", "May", "June", "July", "Aug", "Sep", "Oct", "Nov", "Dec"];
                    var service_month_name = service_month[service_date_month - 1];
                    // console.log(trip_month_name);
                    $('#service_data').append(`
                    <div class="card">
                            <div class="service_top">
                                <div class="service_sr">
                                    <span><b>${i + 1}.
                                        </b></span>
                                </div>
                                <div class="service_buttons">
                                    <a href="services_expenses.html?id=${temp.id}" class="btn">Expenses</a>
                                    <a href="vehicle_view.html?id=${vehicle_id}" class="btn">Vehicle</a>
                                    <a type="button" onclick="addTripDataInModal()" class="btn" data-toggle="modal" data-target="#trip_edit">
                                    <i class="fa fa-pencil" aria-hidden="true"></i>
                                </a>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="service_date">
                                        <span><b>Done on</b></span><span>
                                            <strong>${service_date_day} </strong>${service_month_name} ${service_year}</span>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="service_invoice">
                                        <span><b>Invoive ID</b></span>
                                        <strong>${temp.invoice_id}</strong>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="service_vehicle">
                                        <span><b>vehicle no.</b></span>
                                        <div class="vehiclePlate mt-1"><span class="vehiclePlateNumber">${temp.vehicle_id.vehicle_number}
                                            </span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `)

                }
            }
            else {
                console.log(service.error)
                console.log(service.message);
            }
        });
    </script>
    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"
        integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ"
        crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"
        integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm"
        crossorigin="anonymous"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            $("#sidebarCollapse").on("click", function () {
                $("#sidebar").toggleClass("active");
            });
        });
    </script>
</body>

</html>